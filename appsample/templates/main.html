{% extends "base.html" %}


{% block scripts %}
{{ super() }}
<script type="text/javascript" src="{{url_for('static', filename='js/main.js')}}"></script>
{% endblock %}


{% block navbar_search %}
    <form class="search_form">
        <span class="icon"><i class="fa fa-search"></i></span>
        <input type="search" id="search_input" placeholder="Search..." />
    </form>
{% endblock %}


{% block navbar_login %}
    {% if current_user.is_authenticated %}
        <a href="{{ url_for('auth.logout') }}" class="search_div_url">登出</a>
    {% else %}
        {{ super() }}
    {% endif %}
{% endblock navbar_login %}


{% block page_content %}
    <div id="wrapper">
        <section id="random">
            <h2>隨機</h2>
            <ul id="random_content">
                {% for i in rand %}
                <li>
                    <p>
                        author:{{ i['author'] }}<br>
                        <a href="{{ i['url'] }}" class="manga_url">{{ i['name'] }}</a>
                    </p>
                </li>
                {% endfor %}
            </ul>
        </section>
        <section id="main">
            <div id = "iconBtnRow">
                <button id = "sort_button" class="iconBtn"><i class='fas fa-sort'></i></button>
                {% if current_user.is_administrator() %}
                    <button id = "add_button" class="iconBtn"><i class='far fa-plus-square'></i></button>
                {% endif %}
            </div>
            <ul id="main_content">
                {% for row in rows %}
                    <li>
                        <a href="{{ row['url'] }}" class="manga_url">{{ row['name'] }}</a>
                        <div id="{{ row['mid'] }}">
                            {% if current_user.is_authenticated %}
                                 <button class="modify"><i class='fas fa-pen'></i></button>
                                {% if current_user.is_administrator() %}
                                    <button class="delete"><i class='far fa-trash-alt'></i></button>
                                {% endif %}
                            {% endif %}
                        </div>
                    </li>
                {% endfor %}
            </ul>
        </section>
        <form id="form_content" method="POST" action="/">
            <h1>表單</h1>
            {{form.hidden_tag()}}
            <div id="form_container">
                <div class="input_container">
                    {{form.name}}
                    {{form.name.label}}
                </div>
                <div class="input_container">
                    {{form.author}}
                    {{form.author.label}}
                </div>
                <div class="input_container">
                    {{form.group}}
                    {{form.group.label}}
                </div>
                <div class="input_container">
                    {{form.url}}
                    {{form.url.label}}
                </div>
                <div class="input_container">
                    {{form.pages}}
                    {{form.pages.label}}
                </div>
                <div class="form_footer">{{form.submit}}
                    <button id="modify_cancel">取消</button>
                </div>
            </div>
        </form>
        <div id="overlay"></div>
        <dialog id="delete_dialog">
            <input id="delete_mid" type="hidden">
            <label><i class='fas fa-exclamation-triangle'></i>確認刪除?</label>
            <div class="delete_div">
              <button id="delete_confirm">確定</button>
              <button id="delete_cancel">取消</button>
            </div>
        </dialog>
    </div>
{% endblock %}
